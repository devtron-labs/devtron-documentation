"use strict";(globalThis.webpackChunkdocdevtron=globalThis.webpackChunkdocdevtron||[]).push([[16612],{28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>o});var t=r(96540);const a={},i=t.createContext(a);function s(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(i.Provider,{value:n},e.children)}},53712:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"user-guide/bulk-update/bulk-edit-ent","title":"Bulk Edit (v1beta2)","description":"Introduction","source":"@site/docs/user-guide/bulk-update/bulk-edit-ent.md","sourceDirName":"user-guide/bulk-update","slug":"/user-guide/bulk-update/bulk-edit-ent","permalink":"/docs/user-guide/bulk-update/bulk-edit-ent","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Bulk Edit (v1beta1)","permalink":"/docs/user-guide/bulk-update/bulk-edit"},"next":{"title":"Application Templates","permalink":"/docs/user-guide/app-management/application-template"}}');var a=r(74848),i=r(28453);const s={},o="Bulk Edit (v1beta2)",l={},c=[{value:"Introduction  <a></a>",id:"introduction--",level:2},{value:"Tree Structure of the Bulk Edit Script",id:"tree-structure-of-the-bulk-edit-script",level:3},{value:"Step 1: Use Selector Block",id:"step-1-use-selector-block",level:2},{value:"Step 2: Choose the Configs",id:"step-2-choose-the-configs",level:2},{value:"Deployment Templates",id:"deployment-templates",level:3},{value:"What you can do?",id:"what-you-can-do",level:4},{value:"ConfigMaps",id:"configmaps",level:3},{value:"What you can do?",id:"what-you-can-do-1",level:4},{value:"Secrets",id:"secrets",level:3},{value:"What you can do?",id:"what-you-can-do-2",level:4},{value:"Step 3: Specify the Operation",id:"step-3-specify-the-operation",level:2},{value:"On Deployment Templates",id:"on-deployment-templates",level:3},{value:"Example 1 - Configure memory to <code>250Mi</code>",id:"example-1---configure-memory-to-250mi",level:4},{value:"Example 2 - Add a new value <code>ENABLE_AUTOSCALING: true</code>",id:"example-2---add-a-new-value-enable_autoscaling-true",level:4},{value:"Example 3 - Update deployment chart version to <code>4.30.1</code>",id:"example-3---update-deployment-chart-version-to-4301",level:4},{value:"On ConfigMaps",id:"on-configmaps",level:3},{value:"Example 1 - Add <code>FEATURE_ENABLE_X</code> key in existing ConfigMap",id:"example-1---add-feature_enable_x-key-in-existing-configmap",level:4},{value:"Example 2 - Update existing key <code>FEATURE_ENABLE_X</code>",id:"example-2---update-existing-key-feature_enable_x",level:4},{value:"Example 3 - Remove existing key <code>FEATURE_ENABLE_X: true</code> from ConfigMap",id:"example-3---remove-existing-key-feature_enable_x-true-from-configmap",level:4},{value:"Example 4 - Delete ConfigMap",id:"example-4---delete-configmap",level:4},{value:"On Secrets",id:"on-secrets",level:3},{value:"Example 1 - Add <code>API_TOKEN</code> key in existing secret",id:"example-1---add-api_token-key-in-existing-secret",level:4},{value:"Example 2 - Update <code>DB_PASSWORD</code> key in secret",id:"example-2---update-db_password-key-in-secret",level:4},{value:"Example 3 - Remove <code>API_KEY</code> key in secret",id:"example-3---remove-api_key-key-in-secret",level:4},{value:"Example 4 - Add multiple secret keys",id:"example-4---add-multiple-secret-keys",level:4},{value:"Example 5 - Delete Secret",id:"example-5---delete-secret",level:4},{value:"Step 4: Run the Script",id:"step-4-run-the-script",level:2},{value:"Examples (With Full Script)",id:"examples-with-full-script",level:2},{value:"Edit Deployment Template",id:"edit-deployment-template",level:3},{value:"Edit ConfigMap",id:"edit-configmap",level:3},{value:"Combined YAML Template",id:"combined-yaml-template",level:2}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"bulk-edit-v1beta2",children:"Bulk Edit (v1beta2)"})}),"\n",(0,a.jsxs)(n.h2,{id:"introduction--",children:["Introduction  ",(0,a.jsx)("a",{href:"https://devtron.ai/pricing",children:(0,a.jsx)("img",{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",className:"enterprise-badge-img"})})]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"v1beta2"})," is the latest YAML script to perform bulk edits to Deployment Templates, ConfigMaps, or Secrets across multiple applications. This version is currently available only to Enterprise users."]}),"\n",(0,a.jsx)(n.p,{children:"The script provides selectors for choosing the project, application, and environment within which you wish to edit the configs (can be used in combo). Moreover, you now have granular control over the update and delete operations you wish to perform on the configs."}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"RBAC"}),": User needs to have ",(0,a.jsx)(n.a,{href:"../global-configurations/authorization/user-access#grant-specific-permissions",children:"permissions"})," to apps and environments to edit their configs."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"tree-structure-of-the-bulk-edit-script",children:"Tree Structure of the Bulk Edit Script"}),"\n",(0,a.jsxs)(n.p,{children:["Below is the visual structure of the script. Refer ",(0,a.jsx)(n.a,{href:"#examples-with-full-script",children:"Examples"})," and ",(0,a.jsx)(n.a,{href:"#combined-yaml-template",children:"YAML Template"})," to know more."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"v1beta2 Script\r\n\u251c\u2500\u2500 apiVersion                            # (API version is batch/v1beta2)\r\n\u251c\u2500\u2500 kind                                  # (Resource kind is Application)\r\n\u2514\u2500\u2500 spec                                  # (Main configuration)\r\n    \u251c\u2500\u2500 selectors                         # (Target apps filter)\r\n    \u2502   \u2514\u2500\u2500 match                         # (Filter logic used in solo or combo)\r\n    \u2502       \u251c\u2500\u2500 project                   # (Project filters)\r\n    \u2502       \u2502   \u251c\u2500\u2500 includes              # (Projects to include)\r\n    \u2502       \u2502   \u2502   \u2514\u2500\u2500 names             # (Array of project names)\r\n    \u2502       \u2502   \u2514\u2500\u2500 excludes              # (Projects to exclude)\r\n    \u2502       \u2502       \u2514\u2500\u2500 names             # (Array of project names)\r\n    \u2502       \u2502\r\n    \u2502       \u251c\u2500\u2500 app                       # (Application filters)\r\n    \u2502       \u2502   \u251c\u2500\u2500 includes              # (Apps to include)\r\n    \u2502       \u2502   \u2502   \u2514\u2500\u2500 names             # (Array of app names)\r\n    \u2502       \u2502   \u2514\u2500\u2500 excludes              # (Apps to exclude)\r\n    \u2502       \u2502       \u2514\u2500\u2500 names             # (Array of app names)\r\n    \u2502       \u2502\r\n    \u2502       \u2514\u2500\u2500 env                       # (Environment filters)\r\n    \u2502           \u251c\u2500\u2500 includes              # (Envs to include)\r\n    \u2502           \u2502   \u2514\u2500\u2500 names             # (Array of env names)\r\n    \u2502           \u251c\u2500\u2500 excludes              # (Envs to exclude)\r\n    \u2502           \u2502   \u2514\u2500\u2500 names             # (Array of env names)\r\n    \u2502           \u2514\u2500\u2500 type                  # (prod / non-prod)\r\n    \u2502\r\n    \u251c\u2500\u2500 deploymentTemplate                # (Edit deployment template)\r\n    \u2502   \u2514\u2500\u2500 spec                          # (Template spec)\r\n    \u2502       \u251c\u2500\u2500 match                     # (Filter for DT)\r\n    \u2502       \u2502   \u251c\u2500\u2500 include-base-config   # (true or false)\r\n    \u2502       \u2502   \u2514\u2500\u2500 chart                 # (Filter for charts)  \r\n    \u2502       \u2502       \u251c\u2500\u2500 name              # (Enter chart type, e.g. Deployment)  \r\n    \u2502       \u2502       \u251c\u2500\u2500 custom            # (true if it's a user-uploaded custom chart)\r\n    \u2502       \u2502       \u2514\u2500\u2500 version           # (Filter for chart version)\r\n    \u2502       \u2502            \u251c\u2500\u2500 value        # (Enter chart version, e.g. 4.20.0)\r\n    \u2502       \u2502            \u2514\u2500\u2500 operator     # (EQUAL | LESS | GREATER | LESS_EQUAL | GREATER_EQUAL)\r\n    \u2502       \u2514\u2500\u2500 operation                 # (Edit operation)\r\n    \u2502           \u251c\u2500\u2500 action                # (update only)\r\n    \u2502           \u251c\u2500\u2500 field                 # (values / version)\r\n    \u2502           \u251c\u2500\u2500 patchJson             # (Define if operation.field=values)\r\n    \u2502           \u2514\u2500\u2500 chartVersion          # (Define if operation.field=version)\r\n    \u2502\r\n    \u251c\u2500\u2500 configMap                         # (Edit config maps)\r\n    \u2502   \u2514\u2500\u2500 spec                          # (ConfigMap spec)\r\n    \u2502       \u251c\u2500\u2500 match                     # (Filter for ConfigMaps)\r\n    \u2502       \u2502   \u251c\u2500\u2500 include-base-config   # (true or false)\r\n    \u2502       \u2502   \u251c\u2500\u2500 includes              # (CMs to include)\r\n    \u2502       \u2502   \u2502   \u2514\u2500\u2500 names             # (Array of config map names)\r\n    \u2502       \u2502   \u2514\u2500\u2500 excludes              # (CMs to exclude)\r\n    \u2502       \u2502       \u2514\u2500\u2500 names             # (Array of config map names)\r\n    \u2502       \u2502\r\n    \u2502       \u2514\u2500\u2500 operation                 # (Edit operation)\r\n    \u2502           \u251c\u2500\u2500 action                # (create/update/delete)\r\n    \u2502           \u251c\u2500\u2500 field                 # (data)\r\n    \u2502           \u251c\u2500\u2500 patchJson             # (JSON patch for update)\r\n    \u2502           \u2514\u2500\u2500 value                 # (Key-values for create/delete)\r\n    \u2502\r\n    \u2514\u2500\u2500 secret                            # (Edit secrets)\r\n        \u2514\u2500\u2500 spec                          # (Secret spec)\r\n            \u251c\u2500\u2500 match                     # (Filter for Secrets)\r\n            \u2502   \u251c\u2500\u2500 include-base-config   # (true or false)\r\n            \u2502   \u251c\u2500\u2500 includes              # (Secrets to include)\r\n            \u2502   \u2502   \u2514\u2500\u2500 names             # (Array of secret names)\r\n            \u2502   \u2514\u2500\u2500 excludes              # (Secrets to exclude)\r\n            \u2502       \u2514\u2500\u2500 names             # (Array of secret names)\r\n            \u2502\r\n            \u2514\u2500\u2500 operation                 # (Edit operation)\r\n                \u251c\u2500\u2500 action                # (create/update/delete)\r\n                \u251c\u2500\u2500 field                 # (data)\r\n                \u251c\u2500\u2500 patchJson             # (JSON patch for update)\r\n                \u2514\u2500\u2500 value                 # (Key-values for create/delete)\n"})}),"\n",(0,a.jsx)(n.p,{children:"We recommend you to perform bulk edits in 4 parts:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#step-1-use-selector-block",children:"Use Selector Block"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#step-2-choose-the-configs",children:"Choose the Configs"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#step-3-specify-the-operation",children:"Specify the Operation"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#step-4-run-the-script",children:"Run the Script"})}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"step-1-use-selector-block",children:"Step 1: Use Selector Block"}),"\n",(0,a.jsx)(n.p,{children:"In Devtron, configs like Deployment Template, ConfigMaps, and Secrets are specified within application. So you need to determine the target applications initially."}),"\n",(0,a.jsx)(n.p,{children:"In the first part, we will look at the selector script required to filter the applications. Only the applications that match your selector logic will have their Deployment Template, ConfigMap, or Secret available for edits."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: batch/v1beta2\r\nkind: Application\r\nspec:\r\n  selectors:\r\n    match:\r\n      project:\r\n        includes: \r\n            names: ["dev-project", "qa-project"]\r\n        excludes: \r\n            names: ["test-project"]\r\n      app:\r\n        includes: \r\n            names: ["%-dashboard"]\r\n        excludes: \r\n            names: ["demo-%"]\r\n      env:\r\n        includes: \r\n            names: ["staging", "dev"]\r\n        excludes: \r\n            names: ["%qa%"]\r\n        type: non-prod\r\n# Next Steps: Add spec.deploymentTemplate, spec.configMap, and/or spec.secret (check Step 2 and 3)\n'})}),"\n",(0,a.jsxs)(n.p,{children:["You can use ",(0,a.jsx)(n.code,{children:"project"}),", ",(0,a.jsx)(n.code,{children:"app"}),", ",(0,a.jsx)(n.code,{children:"env"})," selectors with the following lists:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"includes.names"})," - A list to specify the ones we need to edit."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"excludes.names"})," - A list to specify the ones which are not to be edited."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["In ",(0,a.jsx)(n.strong,{children:"includes"})," and ",(0,a.jsx)(n.strong,{children:"excludes"}),", you can give the names of your projects/apps/environments. Additionally, you may use wildcard patterns (like ",(0,a.jsx)(n.code,{children:"%-dashboard%"}),")."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"step-2-choose-the-configs",children:"Step 2: Choose the Configs"}),"\n",(0,a.jsx)(n.p,{children:"Here you can filter the Deployment Templates, ConfigMaps, and Secrets you wish to edit (refer the block below)."}),"\n",(0,a.jsx)(n.h3,{id:"deployment-templates",children:"Deployment Templates"}),"\n",(0,a.jsxs)(n.p,{children:["After you add the selector block, add ",(0,a.jsx)(n.code,{children:"deploymentTemplate"})," object."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: batch/v1beta2\r\nkind: Application\r\nspec:\r\n  selectors: # Add selector logic (check Step 1)\r\n  deploymentTemplate:\r\n    spec:\r\n      match:\r\n        chart:\r\n          name: "Deployment" ## Name of the deployment chart\r\n          custom: false ## Set as true if using your uploaded custom deployment chart\r\n          version:\r\n            value: "4.20.0"\r\n            operator: EQUAL ## Supports "GREATER", "LESS", "GREATER_EQUAL", "LESS_EQUAL"\r\n      operation: # Add operation object (check Step 3)\n'})}),"\n",(0,a.jsx)(n.h4,{id:"what-you-can-do",children:"What you can do?"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Add or remove Helm values defined in your chart"}),"\n",(0,a.jsx)(n.li,{children:"Update the chart version itself"}),"\n",(0,a.jsxs)(n.li,{children:["When editing deployment templates, you may choose whether to apply changes to only environment-specific overrides or also to the base configuration:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["When ",(0,a.jsx)(n.code,{children:"true"}),", your operations apply to base deployment template shared across environments"]}),"\n",(0,a.jsxs)(n.li,{children:["When ",(0,a.jsx)(n.code,{children:"false"})," or omitted, changes apply only to environment-level deployment templates"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Combine with ",(0,a.jsx)(n.code,{children:"configMap"})," and ",(0,a.jsx)(n.code,{children:"secret"})," objects in the same script"]}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{title:"Next Step",type:"success",children:(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"#on-deployment-templates",children:"Add operations for your Deployment Template(s)"})})}),"\n",(0,a.jsx)(n.h3,{id:"configmaps",children:"ConfigMaps"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: batch/v1beta2\r\nkind: Application\r\nspec:\r\n  selectors: # Add selector logic (check Step 1)\r\n  configMap:\r\n    spec:\r\n      match:\r\n        include-base-config: true\r\n        includes:\r\n          names: ["qa-cm-%", "prod-cm-%"]\r\n        excludes:\r\n          names: ["%dev%", "%test%"]\r\n      operation: # Add operation object (check Step 3)\n'})}),"\n",(0,a.jsx)(n.h4,{id:"what-you-can-do-1",children:"What you can do?"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Add new keys, e.g., ",(0,a.jsx)(n.code,{children:"FEATURE_ENABLE_X: true"})]}),"\n",(0,a.jsx)(n.li,{children:"Update existing keys"}),"\n",(0,a.jsx)(n.li,{children:"Delete keys or the entire ConfigMap by name"}),"\n",(0,a.jsxs)(n.li,{children:["Include Base Configuration","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"This allows updates to the base-level ConfigMap"}),"\n",(0,a.jsx)(n.li,{children:"Environment-level ConfigMaps remain unaffected if this flag is not set"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Combine with ",(0,a.jsx)(n.code,{children:"deploymentTemplate"})," and ",(0,a.jsx)(n.code,{children:"secret"})," objects in the same script."]}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{title:"Next Step",type:"success",children:(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"#on-configmaps",children:"Add operations for your ConfigMap(s)"})})}),"\n",(0,a.jsx)(n.h3,{id:"secrets",children:"Secrets"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: batch/v1beta2\r\nkind: Application\r\nspec:\r\n  selectors: # Add selector logic (check Step 1)\r\n  secret:\r\n    spec:\r\n      match:\r\n        include-base-config: true\r\n        includes:\r\n          names: ["qa-secret-%", "prod-secret-%"]\r\n        excludes:\r\n          names: ["%dev%", "%test%"]\r\n      operation: # Add operation object (check Step 3)\n'})}),"\n",(0,a.jsx)(n.h4,{id:"what-you-can-do-2",children:"What you can do?"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Add or update secret keys, e.g., ",(0,a.jsx)(n.code,{children:"API_KEY: efd32tr6tsjbf43765"})]}),"\n",(0,a.jsx)(n.li,{children:"Delete keys or the entire Secret by name"}),"\n",(0,a.jsxs)(n.li,{children:["Same usage pattern as ConfigMaps using ",(0,a.jsx)(n.code,{children:"action"}),", ",(0,a.jsx)(n.code,{children:"field: data"}),", and ",(0,a.jsx)(n.code,{children:"value"}),"/",(0,a.jsx)(n.code,{children:"patchJson"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Include Base Configuration","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Enables edits on base-level Secret"}),"\n",(0,a.jsx)(n.li,{children:"Use this to update secrets across environments from a single source of truth"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Combine with ",(0,a.jsx)(n.code,{children:"deploymentTemplate"})," and ",(0,a.jsx)(n.code,{children:"configMap"})," objects in the same script"]}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{title:"Next Step",type:"success",children:(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"#on-secrets",children:"Add operations for your Secret(s)"})})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"step-3-specify-the-operation",children:"Step 3: Specify the Operation"}),"\n",(0,a.jsx)(n.p,{children:"Add the operation to be performed on the selected Deployment Templates, ConfigMaps, and Secrets."}),"\n",(0,a.jsxs)(n.admonition,{title:"Supported operations vary by config type",type:"caution",children:[(0,a.jsx)(n.p,{children:"The supported operations depend on the type of config being edited."}),(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Config Type"}),(0,a.jsx)(n.th,{children:"Supported Actions"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Deployment Templates"}),(0,a.jsxs)(n.td,{children:[(0,a.jsx)(n.code,{children:"update"})," only"]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"ConfigMaps"}),(0,a.jsxs)(n.td,{children:[(0,a.jsx)(n.code,{children:"create"}),", ",(0,a.jsx)(n.code,{children:"update"}),", ",(0,a.jsx)(n.code,{children:"delete"})]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Secrets"}),(0,a.jsxs)(n.td,{children:[(0,a.jsx)(n.code,{children:"create"}),", ",(0,a.jsx)(n.code,{children:"update"}),", ",(0,a.jsx)(n.code,{children:"delete"})]})]})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"on-deployment-templates",children:"On Deployment Templates"}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:["Deployment Templates support only ",(0,a.jsx)(n.code,{children:"action: update"}),", along with ",(0,a.jsx)(n.code,{children:"field: values"})," or ",(0,a.jsx)(n.code,{children:"field: version"}),", and the corresponding ",(0,a.jsx)(n.code,{children:"patchJson"})," or ",(0,a.jsx)(n.code,{children:"chartVersion"}),"."]})}),"\n",(0,a.jsxs)(n.h4,{id:"example-1---configure-memory-to-250mi",children:["Example 1 - Configure memory to ",(0,a.jsx)(n.code,{children:"250Mi"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'...\r\n...\r\n... # Add the following in deploymentTemplate.spec\r\n      operation:\r\n        action: update\r\n        field: values\r\n        patchJson: \'[{ "op": "replace", "path": "/resources/requests/memory", "value": "250Mi" }]\'\n'})}),"\n",(0,a.jsxs)(n.h4,{id:"example-2---add-a-new-value-enable_autoscaling-true",children:["Example 2 - Add a new value ",(0,a.jsx)(n.code,{children:"ENABLE_AUTOSCALING: true"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'...\r\n...\r\n... # Add the following in deploymentTemplate.spec\r\n      operation:\r\n        action: update\r\n        field: values\r\n        patchJson: \'[{ "op": "add", "path": "/ENABLE_AUTOSCALING", "value": true }]\'\n'})}),"\n",(0,a.jsxs)(n.h4,{id:"example-3---update-deployment-chart-version-to-4301",children:["Example 3 - Update deployment chart version to ",(0,a.jsx)(n.code,{children:"4.30.1"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'...\r\n...\r\n... # Add the following in deploymentTemplate.spec\r\n      operation:\r\n        action: update\r\n        field: version\r\n        chartVersion: "4.30.1"           \n'})}),"\n",(0,a.jsx)(n.h3,{id:"on-configmaps",children:"On ConfigMaps"}),"\n",(0,a.jsxs)(n.h4,{id:"example-1---add-feature_enable_x-key-in-existing-configmap",children:["Example 1 - Add ",(0,a.jsx)(n.code,{children:"FEATURE_ENABLE_X"})," key in existing ConfigMap"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'...\r\n...\r\n... # Add the following in configMap.spec\r\n      operation:\r\n        action: update\r\n        field: data\r\n        patchJson: \'[{ "op": "add", "path": "/FEATURE_ENABLE_X", "value": "true" }]\'\n'})}),"\n",(0,a.jsxs)(n.h4,{id:"example-2---update-existing-key-feature_enable_x",children:["Example 2 - Update existing key ",(0,a.jsx)(n.code,{children:"FEATURE_ENABLE_X"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'...\r\n...\r\n... # Add the following in configMap.spec\r\n      operation:\r\n        action: update\r\n        field: data\r\n        patchJson: \'[{ "op": "replace", "path": "/FEATURE_ENABLE_X", "value": "false" }]\'\n'})}),"\n",(0,a.jsxs)(n.h4,{id:"example-3---remove-existing-key-feature_enable_x-true-from-configmap",children:["Example 3 - Remove existing key ",(0,a.jsx)(n.code,{children:"FEATURE_ENABLE_X: true"})," from ConfigMap"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'...\r\n...\r\n... # Add the following in configMap.spec\r\n      operation:\r\n        action: update\r\n        field: data\r\n        patchJson: \'[{ "op": "remove", "path": "/FEATURE_ENABLE_X" }]\'\n'})}),"\n",(0,a.jsx)(n.h4,{id:"example-4---delete-configmap",children:"Example 4 - Delete ConfigMap"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"...\r\n...\r\n... # Add the following in configMap.spec\r\n      operation:\r\n        action: delete\r\n        field: data\r\n        value: banking-cm # In 'value', enter the name of the ConfigMap to delete\n"})}),"\n",(0,a.jsx)(n.h3,{id:"on-secrets",children:"On Secrets"}),"\n",(0,a.jsxs)(n.h4,{id:"example-1---add-api_token-key-in-existing-secret",children:["Example 1 - Add ",(0,a.jsx)(n.code,{children:"API_TOKEN"})," key in existing secret"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'...\r\n...\r\n... # Add the following in secret.spec\r\n      operation:\r\n        action: update\r\n        field: data\r\n        patchJson: \'[{ "op": "add", "path": "/API_TOKEN", "value": "u4hg847598fc" }]\'\n'})}),"\n",(0,a.jsxs)(n.h4,{id:"example-2---update-db_password-key-in-secret",children:["Example 2 - Update ",(0,a.jsx)(n.code,{children:"DB_PASSWORD"})," key in secret"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'...\r\n...\r\n... # Add the following in secret.spec\r\n      operation:\r\n        action: update\r\n        field: data\r\n        patchJson: \'[{ "op": "replace", "path": "/DB_PASSWORD", "value": "root@123" }]\'\n'})}),"\n",(0,a.jsxs)(n.h4,{id:"example-3---remove-api_key-key-in-secret",children:["Example 3 - Remove ",(0,a.jsx)(n.code,{children:"API_KEY"})," key in secret"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'...\r\n...\r\n... # Add the following in secret.spec\r\n      operation:\r\n        action: update\r\n        field: data\r\n        patchJson: \'[{ "op": "remove", "path": "/API_KEY" }]\'\n'})}),"\n",(0,a.jsx)(n.h4,{id:"example-4---add-multiple-secret-keys",children:"Example 4 - Add multiple secret keys"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'...\r\n...\r\n... # Add the following in secret.spec\r\n      operation:\r\n        action: update\r\n        field: data\r\n        patchJson: \'[\r\n          { "op": "add", "path": "/TOKEN", "value": "shc24235" },\r\n          { "op": "replace", "path": "/API_KEY", "value": "u4hg847598fc" }\r\n        ]\'\n'})}),"\n",(0,a.jsx)(n.h4,{id:"example-5---delete-secret",children:"Example 5 - Delete Secret"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"...\r\n...\r\n... # Add the following in secret.spec\r\n      operation:\r\n        action: delete\r\n        field: data\r\n        value: banking-secret # In 'value', enter the name of the secret to delete\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"step-4-run-the-script",children:"Step 4: Run the Script"}),"\n",(0,a.jsxs)(n.p,{children:["Before running the script, make sure to check the impacted applications and configs, by clicking the ",(0,a.jsx)(n.strong,{children:"Show Impacted Objects"})," button. We recommend you to do this just so you don't end up unintentionally editing any config (Deployment Templates, ConfigMaps, and Secrets)."]}),"\n",(0,a.jsxs)(n.p,{children:["Next, click ",(0,a.jsx)(n.strong,{children:"Run"})," to execute the script. The output of the script execution will be shown in the ",(0,a.jsx)(n.strong,{children:"Output"})," tab in the bottom drawer."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"examples-with-full-script",children:"Examples (With Full Script)"}),"\n",(0,a.jsx)(n.h3,{id:"edit-deployment-template",children:"Edit Deployment Template"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"CASE 1"}),": Update ",(0,a.jsx)(n.code,{children:"replicaCount"})," in only Base Deployment Templates of ",(0,a.jsx)(n.code,{children:"devtron"})," project"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-YAML",children:'apiVersion: batch/v1beta2\r\nkind: Application\r\nspec:\r\n  selectors:\r\n    match:\r\n      project:\r\n        includes:\r\n          names: \r\n            - devtron\r\n  deploymentTemplate:\r\n    spec:\r\n      match:\r\n        include-base-config: true\r\n      operation:\r\n        action: update\r\n        field: values\r\n        patchJson: \'[{ "op": "replace", "path": "/replicaCount", "value": 2 }]\'\n'})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"CASE 2"}),": Remove ",(0,a.jsx)(n.code,{children:"replicaCount"})," in only Base Deployment Templates of all applications (names) that end with ",(0,a.jsx)(n.code,{children:"-sanity-app"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-YAML",children:'apiVersion: batch/v1beta2\r\nkind: Application\r\nspec:\r\n  selectors:\r\n    match:\r\n      app:\r\n        includes:\r\n          names:\r\n            - "%-sanity-app"\r\n  deploymentTemplate:\r\n    spec:\r\n      match:\r\n        include-base-config: true\r\n      operation:\r\n        action: update\r\n        field: values\r\n        patchJson: \'[{ "op": "remove", "path": "/replicaCount" }]\'\n'})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"CASE 3"}),": Add ",(0,a.jsx)(n.code,{children:"replicaCount"})," in both (Base + Env Override) Deployment Templates of all applications (names) having at least one prod environment (excluding any environment name containing ",(0,a.jsx)(n.code,{children:"virtual"}),")"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-YAML",children:'apiVersion: batch/v1beta2\r\nkind: Application\r\nspec:\r\n  selectors:\r\n    match:\r\n      env:\r\n        type: prod\r\n        excludes:\r\n          names:\r\n            - "%virtual%"\r\n  deploymentTemplate:\r\n    spec:\r\n      match:\r\n        include-base-config: true\r\n      operation:\r\n        action: update\r\n        field: values\r\n        patchJson: \'[{ "op": "add", "path": "/replicaCount", "value": 2 }]\'\n'})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"CASE 4"}),": Change Deployment Chart Version (Only Env Override) to ",(0,a.jsx)(n.code,{children:"4.30.0"})," for all ",(0,a.jsx)(n.code,{children:"non-prod"})," environments having ",(0,a.jsx)(n.code,{children:"Rollout Deployment"})," chart and version ",(0,a.jsx)(n.code,{children:"<= 4.20.0"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-YAML",children:'apiVersion: batch/v1beta2\r\nkind: Application\r\nspec:\r\n  selectors:\r\n    match:\r\n      env:\r\n        type: non-prod\r\n  deploymentTemplate:\r\n    spec:\r\n      match:\r\n        chart:\r\n          name: "Rollout Deployment"\r\n          version:\r\n            value: 4.20.0\r\n            operator: LESS_EQUAL\r\n      operation:\r\n        action: update\r\n        field: version\r\n        chartVersion: 4.30.0\n'})}),"\n",(0,a.jsx)(n.h3,{id:"edit-configmap",children:"Edit ConfigMap"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"CASE 1"}),": Update ",(0,a.jsx)(n.code,{children:"USE_GIT_CLI"})," in ",(0,a.jsx)(n.code,{children:"orchestrator-cm"})," in only Base ConfigMap of all projects (names) that starts with ",(0,a.jsx)(n.code,{children:"go-lang"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-YAML",children:'apiVersion: batch/v1beta2\r\nkind: Application\r\nspec:\r\n  selectors:\r\n    match:\r\n      project:\r\n        includes:\r\n          names: \r\n            - "go-lang%"\r\n  configMap:\r\n    spec:\r\n      match:\r\n        include-base-config: true\r\n      operation:\r\n        action: update\r\n        field: data\r\n        patchJson: \'[{ "op": "replace", "path": "/USE_GIT_CLI", "value": "true" }]\'\n'})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"CASE 2"}),": Remove ",(0,a.jsx)(n.code,{children:"USE_GIT_CLI"})," in ",(0,a.jsx)(n.code,{children:"orchestrator-cm"})," in only Base ConfigMap of all applications, except for the ConfigMaps with name ",(0,a.jsx)(n.code,{children:"orchestrator-cm"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-YAML",children:'apiVersion: batch/v1beta2\r\nkind: Application\r\nspec:\r\n  selectors:\r\n    match:\r\n      app:\r\n        includes:\r\n          names: \r\n            - "%%" # %% Wildcard for all applications\r\n  configMap:\r\n    spec:\r\n      match:\r\n        include-base-config: true\r\n        excludes:\r\n          names:\r\n            - orchestrator-cm\r\n      operation:\r\n        action: update\r\n        field: data\r\n        patchJson: \'[{ "op": "remove", "path": "/USE_GIT_CLI" }]\'\n'})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"CASE 3"}),": Add ",(0,a.jsx)(n.code,{children:"USE_GIT_CLI"})," in ",(0,a.jsx)(n.code,{children:"orchestrator-cm"})," in both (Base + Env Override) ConfigMaps of all applications (names) having at least one ",(0,a.jsx)(n.code,{children:"non-prod"})," environment (excluding any environment name containing ",(0,a.jsx)(n.code,{children:"virtual"}),")"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-YAML",children:'apiVersion: batch/v1beta2\r\nkind: Application\r\nspec:\r\n  selectors:\r\n    match:\r\n      env:\r\n        type: non-prod\r\n        excludes:\r\n          names:\r\n            - "%virtual%"\r\n  configMap:\r\n    spec:\r\n      match:\r\n        include-base-config: true\r\n      operation:\r\n        action: update\r\n        field: data\r\n        patchJson: \'[{ "op": "add", "path": "/USE_GIT_CLI", "value": "true" }]\'\n'})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"CASE 4"}),": Delete a ConfigMap named ",(0,a.jsx)(n.code,{children:"orchestrator-cm"})," (Only From Env Override) from all ",(0,a.jsx)(n.code,{children:"non-prod"})," environments except for the applications with name ",(0,a.jsx)(n.code,{children:"orchestrator-app"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-YAML",children:"apiVersion: batch/v1beta2\r\nkind: Application\r\nspec:\r\n  selectors:\r\n    match:\r\n      app:\r\n        excludes:\r\n          names:\r\n            - orchestrator-app\r\n      env:\r\n        type: non-prod\r\n  configMap:\r\n    spec:        \r\n      operation:\r\n        action: delete\r\n        value: orchestrator-cm\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"combined-yaml-template",children:"Combined YAML Template"}),"\n",(0,a.jsx)(n.p,{children:"You can use the below script as a template if you wish to edit Deployment Templates, ConfigMaps, Secrets of one or more apps in bulk."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: batch/v1beta2\r\nkind: Application\r\nspec:\r\n  selectors:\r\n    match:\r\n      project:\r\n        includes:\r\n          names: ["dev"]\r\n        excludes:\r\n          names: ["test"]\r\n      app:\r\n        includes:\r\n          names: ["%-dashboard", "%-server"]\r\n        excludes:\r\n          names: ["%demo-%", "%test-%"]\r\n      env:\r\n        type: non-prod\r\n  deploymentTemplate:\r\n    spec:\r\n      match:\r\n        include-base-config: true\r\n        chart:\r\n          name: "Deployment"          \r\n          custom: false               \r\n          version:\r\n            value: "4.20.0"\r\n            operator: LESS_EQUAL\r\n  configMap:\r\n    spec:\r\n      match:\r\n        include-base-config: true\r\n        includes:\r\n          names: ["qa-cm-%", "prod-cm-%"]\r\n        excludes:\r\n          names: ["%dev%", "%test%"]\r\n      operation:\r\n        action: update\r\n        field: data\r\n        patchJson: \'[{ "op": "add", "path": "/FEAT_TEST_ENABLE", "value": "true" },{"op": "replace","path":"/LOG_LEVEL","value": "-1"}]\'\r\n  secret:\r\n    spec:\r\n      match:\r\n        include-base-config: true\r\n        includes:\r\n          names: ["qa-secret-%", "prod-secret-%"]\r\n        excludes:\r\n          names: ["%dev%", "%test%"]\r\n      operation:\r\n        action: update\r\n        field: data\r\n        patchJson: \'[{ "op": "add", "path": "/DB_PASSWORD", "value": "********" },{"op": "replace","path":"/ADMIN_PASSWORD","value": "********"}]\'\n'})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);
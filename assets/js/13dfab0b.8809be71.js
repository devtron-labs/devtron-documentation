"use strict";(globalThis.webpackChunkdocdevtron=globalThis.webpackChunkdocdevtron||[]).push([[57218],{28453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>l});var n=s(96540);const r={},i=n.createContext(r);function a(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(i.Provider,{value:t},e.children)}},91930:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"user-guide/creating-application/base-config/secrets","title":"Secrets","description":"Secrets and configmaps both are used to store environment variables but there is one major difference between them: Configmap stores key-values in normal text format while secrets store them in base64 encrypted form. Devtron hides the data of secrets for the normal users and it is only visible to the users having edit permission.","source":"@site/docs/user-guide/creating-application/base-config/secrets.md","sourceDirName":"user-guide/creating-application/base-config","slug":"/user-guide/creating-application/base-config/secrets","permalink":"/docs/user-guide/creating-application/base-config/secrets","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ConfigMaps","permalink":"/docs/user-guide/creating-application/base-config/config-maps"},"next":{"title":"Types of External Secrets","permalink":"/docs/user-guide/creating-application/base-config/eso/"}}');var r=s(74848),i=s(28453);const a={},l="Secrets",c={},o=[{value:"Add Secret",id:"add-secret",level:2},{value:"Volume Mount Path",id:"volume-mount-path",level:2},{value:"Sub Path",id:"sub-path",level:2},{value:"File Permission",id:"file-permission",level:2},{value:"Update Secrets",id:"update-secrets",level:2},{value:"Delete Secret",id:"delete-secret",level:2},{value:"Data Types",id:"data-types",level:2},{value:"Mount Existing Kubernetes Secrets",id:"mount-existing-kubernetes-secrets",level:2},{value:"Kubernetes External Secret (Deprecated)",id:"kubernetes-external-secret-deprecated",level:3},{value:"External Secrets",id:"external-secrets",level:2},{value:"AWS Secret Manager",id:"aws-secret-manager",level:3},{value:"Installing kubernetes-external-secrets Using Chart",id:"installing-kubernetes-external-secrets-using-chart",level:4},{value:"Adding Secrets From AWS Secret Manager",id:"adding-secrets-from-aws-secret-manager",level:4},{value:"Adding Secrets in AWS Secret Manager",id:"adding-secrets-in-aws-secret-manager",level:4}];function d(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"secrets",children:"Secrets"})}),"\n",(0,r.jsx)(t.p,{children:"Secrets and configmaps both are used to store environment variables but there is one major difference between them: Configmap stores key-values in normal text format while secrets store them in base64 encrypted form. Devtron hides the data of secrets for the normal users and it is only visible to the users having edit permission."}),"\n",(0,r.jsx)(t.p,{children:"Secret objects let you store and manage sensitive information, such as passwords, authentication tokens, and ssh keys. Embedding this information in secrets is safer and more flexible than putting it verbatim in a Pod definition or in a container image."}),"\n",(0,r.jsx)(t.h2,{id:"add-secret",children:"Add Secret"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Go to ",(0,r.jsx)(t.strong,{children:"Application Management"})," \u2192 ",(0,r.jsx)(t.strong,{children:"Devtron Applications"})," \u2192 (Select Your App)"]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/devtron-v2/app-management/devtron-apps/secrets/devtron-apps-nav.jpg",alt:""}),"\r\n",(0,r.jsx)("center",{children:"Figure 1: Navigating to App Configurations"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Go to ",(0,r.jsx)(t.strong,{children:"Configurations"})," (tab) \u2192 ",(0,r.jsx)(t.strong,{children:"Base Configurations"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/devtron-v2/app-management/devtron-apps/secrets/appconfig-page.jpg",alt:""}),"\r\n",(0,r.jsx)("center",{children:"Figure 2: Application's 'Configurations' Page"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Click the ",(0,r.jsx)(t.strong,{children:"+"})," button next to ",(0,r.jsx)(t.strong,{children:"ConfigMaps"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/devtron-v2/app-management/devtron-apps/secrets/add-secret.jpg",alt:""}),"\r\n",(0,r.jsx)("center",{children:"Figure 3: Adding Secret"})]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Key"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"Name"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Provide a name to your Secret"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"Data Type"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["Provide the Data Type of your secret. To know about different Data Types available click on ",(0,r.jsx)(t.a,{href:"/docs/user-guide/creating-application/base-config/secrets#data-types",children:"Data Types"})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"Data Volume"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Specify if there is a need to add a volume that is accessible to the Containers running in a pod."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"Use secrets as Environment Variable"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Select this option if you want to inject Environment Variables in your pods using Secrets."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"Use secrets as Data Volume"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Select this option if you want to configure a Data Volume that is accessible to Containers running in a pod. Ensure that you provide a Volume mount path for the same."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"Key-Value"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Provide a key and the corresponding value of the provided key."})]})]})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Enter data in:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"GUI mode"})," \u2013 User-friendly interface. Click ",(0,r.jsx)(t.strong,{children:"+Add"})," button and enter the ",(0,r.jsx)(t.strong,{children:"Key"})," and ",(0,r.jsx)(t.strong,{children:"Value"})," fields without quotes."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"YAML mode"})," \u2013 Raw YAML for entering key-value pairs in the format ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"key: value"})}),". Boolean and numeric values must be wrapped in double quotes."]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/devtron-v2/app-management/devtron-apps/secrets/created-secret.gif",alt:""}),"\r\n",(0,r.jsx)("center",{children:"Figure 4: Entering the Details"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["You may perform a dry run before clicking ",(0,r.jsx)(t.strong,{children:"Save"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"volume-mount-path",children:"Volume Mount Path"}),"\n",(0,r.jsxs)(t.p,{children:["Specify the volume mount folder path in ",(0,r.jsx)(t.code,{children:"Volume Mount Path"}),", a path where the data volume needs to be mounted. This volume will be accessible to the containers running in a pod."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/devtron-v2/app-management/devtron-apps/secrets/secret-volume-mount-path.jpg",alt:""}),"\r\n",(0,r.jsx)("center",{children:"Figure 5: Entering Volume Mount Path"})]}),"\n",(0,r.jsx)(t.h2,{id:"sub-path",children:"Sub Path"}),"\n",(0,r.jsxs)(t.p,{children:["For multiple files mount at the same location you need to check sub path ",(0,r.jsx)(t.code,{children:"bool"})," field, it will use the file name (key) as sub path.\r\nSub Path feature is not applicable in case of external configmap except\r\nAWS Secret Manager, AWS System Manager and Hashi Corp Vault, for these cases ",(0,r.jsx)(t.code,{children:"Name (Secret key)"})," as sub path will be picked up automatically."]}),"\n",(0,r.jsx)(t.h2,{id:"file-permission",children:"File Permission"}),"\n",(0,r.jsx)(t.p,{children:"File permission will be provide at the configmap level not on the each key of the configmap. it will take 3 digit standard permission for the file."}),"\n",(0,r.jsx)(t.h2,{id:"update-secrets",children:"Update Secrets"}),"\n",(0,r.jsx)(t.p,{children:"You can update your secrets anytime later, but you cannot change the name of your secrets. If you want to change your name of secrets then you have to create a new secret."}),"\n",(0,r.jsx)(t.p,{children:"To update secrets, click the secret you wish to update."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/devtron-v2/app-management/devtron-apps/secrets/update-secret.jpg",alt:""}),"\r\n",(0,r.jsx)("center",{children:"Figure 6: Updating Existing Secret"})]}),"\n",(0,r.jsxs)(t.p,{children:["Click ",(0,r.jsx)(t.code,{children:"Update Secret"})," to update your secret."]}),"\n",(0,r.jsx)(t.h2,{id:"delete-secret",children:"Delete Secret"}),"\n",(0,r.jsxs)(t.p,{children:["You can delete your secret. Click your secret and click the ",(0,r.jsx)(t.code,{children:"delete sign"})," to delete your secret."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/devtron-v2/app-management/devtron-apps/secrets/delete-secret.jpg",alt:""}),"\r\n",(0,r.jsx)("center",{children:"Figure 7: Deleting a Secret"})]}),"\n",(0,r.jsx)(t.h2,{id:"data-types",children:"Data Types"}),"\n",(0,r.jsx)(t.p,{children:"There are five Data types that you can use to save your secret."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Kubernetes Secret"}),": The secret that you create using Devtron."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Kubernetes External Secret"}),": The secret data of your application is fetched by Devtron externally. Then the Kubernetes External Secret is converted to Kubernetes Secret."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"/docs/user-guide/creating-application/base-config/eso/",children:"External Secrets Operator"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"Google Secrets Manager"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"AWS Secret Manager"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"Azure Secrets Manager"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"HashiCorp Vault"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsxs)(t.em,{children:["Note: The conversion of secrets from various data types to Kubernetes Secrets is done within Devtron and irrespective of the data type, after conversion, the Pods access ",(0,r.jsx)(t.code,{children:"secrets"})," normally."]})}),"\n",(0,r.jsx)(t.h2,{id:"mount-existing-kubernetes-secrets",children:"Mount Existing Kubernetes Secrets"}),"\n",(0,r.jsx)(t.p,{children:"Use this option to mount an existing Kubernetes Secret in your application pods. A Secret will not be created by system so please ensure that the secret already exist within the namespace else the deployment will fail."}),"\n",(0,r.jsx)(t.h3,{id:"kubernetes-external-secret-deprecated",children:"Kubernetes External Secret (Deprecated)"}),"\n",(0,r.jsxs)(t.p,{children:["The secret that is already created and stored in the environment and being used by Devtron externally is referred here as ",(0,r.jsx)(t.code,{children:"Kubernetes External Secret"}),". For this option, Devtron will not create any secret by itself but they can be used within the pods. Before adding secret from kubernetes external secret, please make sure that secret with the same name is present in the environment. To add secret from kubernetes external secret, follow the steps mentioned below:"]}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Navigate to ",(0,r.jsx)(t.code,{children:"Secrets"})," of the application."]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.code,{children:"Add Secret"})," to add a new secret."]}),"\n",(0,r.jsxs)(t.li,{children:["Select ",(0,r.jsx)(t.code,{children:"Kubernetes External Secret"})," from dropdown of ",(0,r.jsx)(t.code,{children:"Data type"}),"."]}),"\n",(0,r.jsx)(t.li,{children:"Provide a name to your secret. Devtron will search secret in the environment with the same name that you mention here."}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"external-secrets",children:"External Secrets"}),"\n",(0,r.jsxs)(t.p,{children:["Refer ",(0,r.jsx)(t.a,{href:"/docs/user-guide/creating-application/base-config/eso/",children:"External Secrets Operator"})," to know more."]}),"\n",(0,r.jsx)(t.h3,{id:"aws-secret-manager",children:"AWS Secret Manager"}),"\n",(0,r.jsxs)(t.p,{children:["Before adding any external secrets on Devtron, ",(0,r.jsx)(t.code,{children:"kubernetes-external-secrets"})," must be installed on the target cluster. Kubernetes External Secrets allows you to use external secret management systems (e.g., AWS Secrets Manager, Hashicorp Vault, etc) to securely add secrets in Kubernetes."]}),"\n",(0,r.jsx)(t.h4,{id:"installing-kubernetes-external-secrets-using-chart",children:"Installing kubernetes-external-secrets Using Chart"}),"\n",(0,r.jsx)(t.p,{children:"To install the chart with the release named my-release:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"$ helm install my-release external-secrets/kubernetes-external-secrets\n"})}),"\n",(0,r.jsx)(t.p,{children:"To install the chart with AWS IAM Roles for Service Accounts:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"$ helm install my-release external-secrets/kubernetes-external-secrets --set securityContext.fsGroup=65534 --set serviceAccount.annotations.\"eks\\.amazonaws\\.com/role-arn\"='arn:aws:iam::111111111111:role/ROLENAME'\n"})}),"\n",(0,r.jsx)(t.h4,{id:"adding-secrets-from-aws-secret-manager",children:"Adding Secrets From AWS Secret Manager"}),"\n",(0,r.jsxs)(t.p,{children:["To add secrets from AWS secret manager, navigate to ",(0,r.jsx)(t.code,{children:"Secrets"})," of the application and follow the steps mentioned below :"]}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Click ",(0,r.jsx)(t.code,{children:"Add Secret"})," to add a new secret."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/devtron-v2/app-management/devtron-apps/secrets/add-secret.jpg",alt:""}),"\r\n",(0,r.jsx)("center",{children:"Figure 8: Adding New Secret"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Select ",(0,r.jsx)(t.code,{children:"AWS Secret Manager"})," from dropdown of ",(0,r.jsx)(t.code,{children:"Data type"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/devtron-v2/app-management/devtron-apps/secrets/aws-secret.jpg",alt:""}),"\r\n",(0,r.jsx)("center",{children:"Figure 9: Choosing AWS Secrets Manager"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Provide a name to your secret."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Select how you want to use the secret. You may leave it selected as environment variable and also you may leave ",(0,r.jsx)(t.code,{children:"Role ARN"})," empty."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["In ",(0,r.jsx)(t.code,{children:"Data"})," section, you will have to provide data in key-value format."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"All the required field to pass your data to fetch secrets on Devtron are described below :"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Key"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"key"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Secret key in backend"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"name"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Name for this key in the generated secret"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"property"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Property to extract if secret in backend is a JSON object"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"isBinary"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Set this to true if configuring an item for a binary file stored else set false"})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"adding-secrets-in-aws-secret-manager",children:"Adding Secrets in AWS Secret Manager"}),"\n",(0,r.jsx)(t.p,{children:"To add secrets in AWS secret manager, do the following steps :"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Go to AWS secret manager console."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Click ",(0,r.jsx)(t.code,{children:"Store a new secret"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Add and save your secret."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/devtron-v2/app-management/devtron-apps/secrets/aws-side-secret.jpg",alt:""}),"\r\n",(0,r.jsx)("center",{children:"Figure 10: Storing Secret in AWS Secrets Manager"})]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);
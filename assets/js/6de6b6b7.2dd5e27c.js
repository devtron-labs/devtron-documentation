"use strict";(globalThis.webpackChunkdocdevtron=globalThis.webpackChunkdocdevtron||[]).push([[72633],{28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>c});var r=s(96540);const t={},o=r.createContext(t);function i(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(o.Provider,{value:n},e.children)}},30358:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"user-guide/resource-browser/kubectl-local","title":"Running Kubectl Commands Locally","description":"Introduction","source":"@site/docs/user-guide/resource-browser/kubectl-local.md","sourceDirName":"user-guide/resource-browser","slug":"/user-guide/resource-browser/kubectl-local","permalink":"/docs/user-guide/resource-browser/kubectl-local","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Add Monitoring Graphs or Dashboards","permalink":"/docs/user-guide/resource-browser/monitoring-graphs"},"next":{"title":"Configure GUI Schema for Editing Manifest","permalink":"/docs/user-guide/operations/edit-gui-schema"}}');var t=s(74848),o=s(28453);const i={},c="Running Kubectl Commands Locally",l={},a=[{value:"Introduction <a></a>",id:"introduction-",level:2},{value:"Challenges in Kubeconfig",id:"challenges-in-kubeconfig",level:2},{value:"Our Solution",id:"our-solution",level:2},{value:"Steps",id:"steps",level:2},{value:"Quick Method",id:"quick-method",level:3},{value:"Manual Method",id:"manual-method",level:3},{value:"Use Case - Port Forwarding <a></a>",id:"use-case---port-forwarding-",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"running-kubectl-commands-locally",children:"Running Kubectl Commands Locally"})}),"\n",(0,t.jsxs)(n.h2,{id:"introduction-",children:["Introduction ",(0,t.jsx)("a",{href:"https://devtron.ai/pricing",children:(0,t.jsx)("img",{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",className:"enterprise-badge-img"})})]}),"\n",(0,t.jsxs)(n.p,{children:["If you wish to run kubectl commands from your local system, you need to have access to your cluster. Traditionally, the kubeconfig file (",(0,t.jsx)(n.code,{children:"./kube/config"}),") helps you connect with the cluster from your local system."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/kubernetes-resource-browser/kubeconfig.jpg",alt:""}),"\n",(0,t.jsx)("center",{children:"Figure 21: Kubeconfig File"})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"challenges-in-kubeconfig",children:"Challenges in Kubeconfig"}),"\n",(0,t.jsx)(n.p,{children:"Kubeconfig becomes painstakingly difficult to maintain especially when it comes to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Granting or revoking access to the cluster for multiple people"}),"\n",(0,t.jsx)(n.li,{children:"Changing the permissions and subsequently the access token"}),"\n",(0,t.jsx)(n.li,{children:"Adding/Updating/Deleting the entries of cluster URLs and tokens"}),"\n",(0,t.jsx)(n.li,{children:"Keeping a record of multiple kubeconfig files"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"our-solution",children:"Our Solution"}),"\n",(0,t.jsx)(n.p,{children:"Devtron helps in reducing the challenges and simplifying the maintenance of kubeconfig file through:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Devtron's Proxy URL for Cluster"})," - A standardized URL that you can use in place of your Kubernetes cluster URL."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Devtron's Access Token"})," - A kubectl-compatible token which can be generated and centrally maintained from ",(0,t.jsx)(n.a,{href:"/docs/user-guide/global-configurations/authorization/api-tokens",children:"Global Configurations \u2192 Authorization \u2192 API tokens"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"steps",children:"Steps"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Prerequisite"}),": An ",(0,t.jsx)(n.a,{href:"/docs/user-guide/global-configurations/authorization/api-tokens",children:"API token with necessary permissions"})," for the user(s) to access the cluster."]}),"\n",(0,t.jsx)(n.p,{children:"If you are not a super-admin and can't generate a token yourself, you can find the session token (argocd.token) using the Developer Tools available in your web browser as shown below."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/kubernetes-resource-browser/argocd-token-v1.gif",alt:""}),"\n",(0,t.jsx)("center",{children:"Figure 22: Using Session Token"})]}),"\n",(0,t.jsx)(n.p,{children:"There are 2 methods of getting kubeconfig in your system:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#quick-method",children:"Quick Method"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#manual-method",children:"Manual Method"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"quick-method",children:"Quick Method"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In Resource Browser, hover on the cluster name and click the ",(0,t.jsx)(n.code,{children:"Get kubeconfig"})," icon."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/kubernetes-resource-browser/getkubeconfig.gif",alt:""}),"\n",(0,t.jsx)("center",{children:"Figure 23: Get Kubeconfig"})]}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Copy the commands and run them on your terminal."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"manual-method",children:"Manual Method"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Go to ",(0,t.jsx)(n.code,{children:"~/.kube"})," folder on your local machine and open the ",(0,t.jsx)(n.code,{children:"config"})," file. Or you may create one with the following content:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="Sample Kubeconfig" showLineNumbers',children:"apiVersion: v1\nkind: Config\nclusters:\n- cluster:\n    insecure-skip-tls-verify: true\n    server: https://<devtron_host_name>/orchestrator/k8s/proxy/cluster/<cluster_name>\n  name: devtron-cluster\ncontexts:\n- context:\n    cluster: devtron-cluster\n    user: admin\n  name: devtron-cluster\ncurrent-context: devtron-cluster\nusers:\n- name: admin\n  user:\n    token: <devtron_token>\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["Edit the following placeholders in the ",(0,t.jsx)(n.code,{children:"server"})," field and the ",(0,t.jsx)(n.code,{children:"token"})," field:"]}),"\n"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Placeholder"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Example"}),(0,t.jsx)(n.th,{children:"Where to Find"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"<devtron_host_name>"})}),(0,t.jsx)(n.td,{children:"Hostname of the Devtron server"}),(0,t.jsx)(n.td,{children:"demo.devtron.ai"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/kubernetes-resource-browser/hostname-page.jpg",children:"Host URL Page"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"<cluster_name>"})}),(0,t.jsx)(n.td,{children:"Name of the cluster (or cluster ID)"}),(0,t.jsx)(n.td,{children:"devtron-cluster"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/kubernetes-resource-browser/applications-page.jpg",children:"Applications Page"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"<devtron_token>"})}),(0,t.jsx)(n.td,{children:"API token or session token"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/kubernetes-resource-browser/authorization-page.jpg",children:"Authorization Page"})})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/kubernetes-resource-browser/kubeconfig.gif",alt:""}),"\n",(0,t.jsx)("center",{children:"Figure 23: Editing Kubeconfig File"})]}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["Test the connection to the cluster by running any kubectl command, e.g., ",(0,t.jsx)(n.code,{children:"kubectl get ns"})," or ",(0,t.jsx)(n.code,{children:"kubectl get po -A"})]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"Additional References",type:"info",children:(0,t.jsxs)(n.p,{children:["Once the connection is successful, you may run any ",(0,t.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/kubectl/#operations",children:"kubectl operations"})," from your system."]})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h2,{id:"use-case---port-forwarding-",children:["Use Case - Port Forwarding ",(0,t.jsx)("a",{href:"https://devtron.ai/pricing",children:(0,t.jsx)("img",{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",className:"enterprise-badge-img"})})]}),"\n",(0,t.jsxs)(n.p,{children:["Assume your applications are running in a Kubernetes cluster on cloud. Now, if you wish to test or debug them on your local machine, you can perform ",(0,t.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/access-application-cluster/port-forward-access-application-cluster/",children:"port forwarding"}),". It creates a tunnel between a port on your machine and a port on a resource within your cluster. Therefore, you can access applications running inside the cluster as though they are running locally on your machine."]}),"\n",(0,t.jsxs)(n.p,{children:["Once you have successfully connected to the cluster, you may run the port-forward command. Refer ",(0,t.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/kubectl/generated/kubectl_port-forward/",children:"kubectl port-forward"})," to see a few examples."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/kubernetes-resource-browser/port-forward.gif",alt:""}),"\n",(0,t.jsx)("center",{children:"Figure 24: Example - Port Forwarding"})]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);
"use strict";(globalThis.webpackChunkdocdevtron=globalThis.webpackChunkdocdevtron||[]).push([[33932],{28453:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>a});var s=n(96540);const r={},i=s.createContext(r);function c(e){const t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(i.Provider,{value:t},e.children)}},48729:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"user-guide/creating-application/base-config/eso/hashicorp-eso","title":"HashiCorp Vault","description":"Install External Secret Operator (ESO).","source":"@site/docs/user-guide/creating-application/base-config/eso/hashicorp-eso.md","sourceDirName":"user-guide/creating-application/base-config/eso","slug":"/user-guide/creating-application/base-config/eso/hashicorp-eso","permalink":"/docs/user-guide/creating-application/base-config/eso/hashicorp-eso","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"hide_table_of_contents":true},"sidebar":"tutorialSidebar","previous":{"title":"Google Secrets Manager","permalink":"/docs/user-guide/creating-application/base-config/eso/gcp-eso"},"next":{"title":"GitOps Configuration","permalink":"/docs/user-guide/creating-application/gitops-config"}}');var r=n(74848),i=n(28453);const c={hide_table_of_contents:!0},a="HashiCorp Vault",o={},l=[];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"hashicorp-vault",children:"HashiCorp Vault"})}),"\n",(0,r.jsx)(t.admonition,{title:"Prerequisite",type:"caution",children:(0,r.jsxs)(t.p,{children:["Install ",(0,r.jsx)(t.a,{href:"/docs/user-guide/creating-application/base-config/eso/install-eso",children:"External Secret Operator (ESO)"}),"."]})}),"\n",(0,r.jsxs)(t.p,{children:["To incorporate secrets from ",(0,r.jsx)(t.strong,{children:"HashiCorp Vault"}),", you need to create a generic Kubernetes secret that will be used for vault authentication. This involves creating a Kubernetes secret in the specific namespace where your application will be deployed.\nThe secret should store the base64-encoded password or token obtained from vault. To simplify the process, you can utilize the Devtron generic chart. An example yaml is given below:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Secret\ntype: Opaque\ndata:\n   token: <vault-password>\nmetadata:\n   name: vault-token\n   namespace: <namespace>\n"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Note"}),": Please note that you don't need to create the Kubernetes secret every time you create an External Secret for the corresponding namespace."]}),"\n",(0,r.jsx)(t.p,{children:"Once you have created the generic secret, follow these steps in the application's Secrets section:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"1. Create a new secret"})}),"\n",(0,r.jsxs)(t.p,{children:["To add a new secret to the application, go to the ",(0,r.jsx)(t.strong,{children:"Configurations"})," page of the application. Then, navigate to the left pane and select the ",(0,r.jsx)(t.code,{children:"Secrets"})," option and click the ",(0,r.jsx)(t.strong,{children:"Add Secret"})," button."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/hc-add-secret.jpg",alt:"Figure 1: Add a New Secret"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsxs)(t.strong,{children:["2. Select ",(0,r.jsx)(t.code,{children:"HashiCorp Vault"})," as the External Secret Operator"]})}),"\n",(0,r.jsxs)(t.p,{children:["After clicking the ",(0,r.jsx)(t.strong,{children:"Add Secret"})," button, select ",(0,r.jsx)(t.code,{children:"HashiCorp Vault"})," from the dropdown menu for the ",(0,r.jsx)(t.code,{children:"Data type"})," option. Provide a name for the secret you are creating, and then proceed to configure the external secret as described in the next step."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/hc-secret-type.jpg",alt:"Figure 2: Select HashiCorp Vault as External Secret Operator"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"3. Configure the secret"})}),"\n",(0,r.jsx)(t.p,{children:"To configure the external secret that will be fetched from HashiCorp Vault for your application, you will need to provide specific details using the following key-value pairs:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/hc-secret-configure.jpg",alt:"Figure 3: Configure HashiCorp Vault Secret Settings"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Key"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"vault.server"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:['Server is the connection address for the Vaultserver, e.g: "',(0,r.jsx)(t.a,{href:"https://vault.example.com:8200",children:"https://vault.example.com:8200"}),'"']})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"vault.path"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Specify the path where the secret is stored in Vault"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"tokenSecretRef.name"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Enter the name of the secret that will be used for authentication"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"tokenSecretRef.key"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Specify the key name within the secret that contains the token"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"secretKey"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Provide a name for the secret in Kubernetes"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"key"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Enter the name of the secret in Vault"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"property"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Specify the key within the Vault secret"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/tokenSecretRef.jpg",alt:"Figure 4: Token Secret Reference Configuration"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/hc-eso.jpg",alt:"Figure 5: HashiCorp Vault ESO Secret Example"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"4. Save the secret"})}),"\n",(0,r.jsxs)(t.p,{children:["After configuring the external secret from HashiCorp Vault, proceed to save the secret by clicking the ",(0,r.jsx)(t.strong,{children:"Save"})," button."]}),"\n",(0,r.jsx)(t.p,{children:"By following the steps mentioned above and configuring these values correctly, you can seamlessly fetch and utilize external secrets from HashiCorp Vault within your application environment by deploying the application."})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);
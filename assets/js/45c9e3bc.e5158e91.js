"use strict";(globalThis.webpackChunkdocdevtron=globalThis.webpackChunkdocdevtron||[]).push([[88551],{28453:(e,t,s)=>{s.d(t,{R:()=>i,x:()=>a});var n=s(96540);const r={},c=n.createContext(r);function i(e){const t=n.useContext(c);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(c.Provider,{value:t},e.children)}},78904:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"user-guide/creating-application/base-config/eso/aws-eso","title":"AWS Secrets Manager","description":"Install External Secret Operator (ESO).","source":"@site/docs/user-guide/creating-application/base-config/eso/aws-eso.md","sourceDirName":"user-guide/creating-application/base-config/eso","slug":"/user-guide/creating-application/base-config/eso/aws-eso","permalink":"/docs/user-guide/creating-application/base-config/eso/aws-eso","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Install ESO","permalink":"/docs/user-guide/creating-application/base-config/eso/install-eso"},"next":{"title":"Google Secrets Manager","permalink":"/docs/user-guide/creating-application/base-config/eso/gcp-eso"}}');var r=s(74848),c=s(28453);const i={},a="AWS Secrets Manager",o={},l=[{value:"ESO AWS secrets Manager Setup with Devtron using ClusterSecretsStore",id:"eso-aws-secrets-manager-setup-with-devtron-using-clustersecretsstore",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"aws-secrets-manager",children:"AWS Secrets Manager"})}),"\n",(0,r.jsx)(t.admonition,{title:"Prerequisite",type:"caution",children:(0,r.jsxs)(t.p,{children:["Install ",(0,r.jsx)(t.a,{href:"/docs/user-guide/creating-application/base-config/eso/install-eso",children:"External Secret Operator (ESO)"}),"."]})}),"\n",(0,r.jsxs)(t.p,{children:["To add secrets from ",(0,r.jsx)(t.strong,{children:"AWS Secrets Manager"}),", we need to create a generic Kubernetes secret for AWS authentication."]}),"\n",(0,r.jsx)(t.p,{children:"Create a Kubernetes secret in the namespace in which the application is to be deployed using base64 encoded AWS access-key and secret-access-key. You can use a Devtron generic chart for it."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Note"}),": You don't have to create the Kubernetes secret every time you create external secret for the respective namespace."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/aws-secret-generic-chart.jpg",alt:""}),"\n",(0,r.jsx)("center",{children:"Figure 1: Create Kubernetes Secret for AWS Authentication"})]}),"\n",(0,r.jsxs)(t.p,{children:["After creating the generic secret, navigate to ",(0,r.jsx)(t.code,{children:"Secrets"})," section of the application and follow the steps mentioned below :"]}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Click ",(0,r.jsx)(t.code,{children:"Add Secret"})," to add a new secret"]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/add-secret.jpg",alt:""}),"\n",(0,r.jsx)("center",{children:"Figure 2: Add a New Secret"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Select ",(0,r.jsx)(t.code,{children:"AWS Secret Manager"})," under ",(0,r.jsx)(t.code,{children:"External Secret Operator"})," (ESO) from the dropdown of ",(0,r.jsx)(t.code,{children:"Data type"})]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/aws-secret-manager-dropdown.jpg",alt:""}),"\n",(0,r.jsx)("center",{children:"Figure 3: Select AWS Secrets Manager"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Configure the secret."}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Key"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"region"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"AWS region in which secret is created"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"accessKeyIDSecretRef.name"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Name of secret created that would be used for authentication"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"accessKeyIDSecretRef.key"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"In generic secret created for AWS authentication, variable name in which base64 encoded AWS access-key is stored"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"secretAccessKeySecretRef.name"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Name of secret created that would be used for authentication"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"secretAccessKeySecretRef.key"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"In generic secret created for AWS authentication, variable name in which base64 encoded secret-access-key is stored"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"secretKey"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Key name to store secret"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"key"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"AWS Secrets Manager secret name"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"property"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"AWS Secrets Manager secret key"})]})]})]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/aws-eso.jpg",alt:""}),"\n",(0,r.jsx)("center",{children:"Figure 4: Configure AWS Secret Settings"})]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/aws-external-secret.jpg",alt:""}),"\n",(0,r.jsx)("center",{children:"Figure 5: AWS External Secret Configuration"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Save the secret."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"eso-aws-secrets-manager-setup-with-devtron-using-clustersecretsstore",children:"ESO AWS secrets Manager Setup with Devtron using ClusterSecretsStore"}),"\n",(0,r.jsx)(t.p,{children:"ClusterSecretStore provides a secure and centralized storage solution for managing and accessing sensitive information, such as passwords, API keys, certificates, and other credentials, within a cluster or application environment."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Requirement:"})," Devtron deployment template chart version should be 4.17 and above."]}),"\n",(0,r.jsx)(t.p,{children:"To setup ESO AWS secrets manager with Devtron using ClusterSecretsStore, follow the mentined steps:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"1. Create a secret for AWS authentication"})}),"\n",(0,r.jsx)(t.p,{children:"Create a Kubernetes secret in any namespace using base64 encoded AWS access-key and secret-access-key. You can use the devtron generic chart for this."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/aws-secret-generic-chart.jpg",alt:""}),"\n",(0,r.jsx)("center",{children:"Figure 6: Use Generic Chart"})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsxs)(t.strong,{children:["2. Create a ",(0,r.jsx)(t.code,{children:"ClusterSecretStore"})]})}),"\n",(0,r.jsxs)(t.p,{children:["Create a ",(0,r.jsx)(t.code,{children:"ClusterSecretStore"})," using the secret created for AWS authentication in step 1."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/clustersecretstore-yaml.jpg",alt:""}),"\n",(0,r.jsx)("center",{children:"Figure 7: Create ClusterSecretStore"})]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"3. Create a secret in the application using ESO AWS Secrets Manager"})}),"\n",(0,r.jsx)(t.p,{children:"Go to the application where you want to create an external secret. Navigate to secrets section under application configuration and create a secret using ESO AWS Secrets Manager."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/secrets/app-secret-clustersecretstore.jpg",alt:""}),"\n",(0,r.jsx)("center",{children:"Figure 8: Create Secret"})]})]})}function h(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);
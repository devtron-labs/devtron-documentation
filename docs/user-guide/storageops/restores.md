# Restore

## Introduction <a href="https://devtron.ai/pricing"><img src="https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg" className="enterprise-badge-img" /></a>

Restore page allows you to recover applications, namespaces, or an entire cluster to a previous state. You can create a restore from the **Restores** tab, view all restore jobs, with their current status, target cluster, and backup source.

---

:::caution Who Can Perform This Action?
Users need to have super-admin permission to create a restore.
:::

## Creating Restore

To restore a backup, you can create a restore:

1. Go to **Data Protection Management** → **Restores**. 

2. Click **+ New Restore**. A new modal window will appear.

3. Enter the required details for each section

    ### 1. Basic Details

    | **Field** | **Required/Optional** | **Description** |
    |------------|-----------------------|-----------------|
    | **Restore Name** | Required | A unique name for identifying the restore job |
    | **Description** | Optional | A short description explaining the purpose of the restore |
    | **Labels** | Optional | Add key-value labels to organize or filter restore jobs |
    | **Restore From Backup** | Required | Choose how to restore: <ul><li> **Specific Backup** – Select a specific backup manually.</li><li> **Latest Backup Created by a Schedule** – Automatically uses the latest backup generated by a defined schedule</li></ul> |
    | **Backup to be Restored** | Required | For: <ul><li> **Specific Backup** - Select the backup you want to restore from the available list</li><li> **Latest Backup Created by a Schedule** -  Select the backup schedule from which you want the latest backup to be restored</li></ul> |


    ### 2. Restore Target


    | **Field** | **Required/Optional** | **Description** |
    |------------|-----------------------|-----------------|
    | **Restore To (Cluster)** | Required | Select the destination cluster for the restore. |
    | **All Namespaces** | Optional | Restores all namespaces from the selected backup. |
    | **Specific Namespaces** | Optional | Select specific namespaces to restore. You can use regex to match multiple namespaces. |
    | **Included Namespaces** | Optional (visible only when **Specific Namespaces** is selected) | Select one or more namespaces to include in the restore process. Only these namespaces will be restored from the backup. <br /> You can also provide regex expressions to include namespaces that follow a specific naming pattern. |
    | **Excluded Namespaces** | Optional (visible only when **Specific Namespaces** is selected) | Select namespaces that should be excluded from the restore process, even if they exist in the backup. <br /> You can also provide regex expressions to exclude namespaces that follow a specific naming pattern.  |
    | **Filter resources using label selectors** | Optional | Filters resources included in the restore using Kubernetes label selectors. Labels within the same group are evaluated using AND logic, while separate groups are evaluated using OR logic. Operators supported are `Equals`, `In`, `NotIn`,`Exists`,`DoesNotExist` |

    ### 3. Restore Settings

    | **Field** | **Required/Optional** | **Description** |
    |------------|-----------------------|-----------------|
    | **Resource Status** | Optional | Specify which Kubernetes resources should be included or excluded in the restore status. Resources must be provided in the format `resourceKind.group`, such as `storageclasses.storage.k8s.io` |
    | **Namespace Mapping** | Optional | Map source namespaces to new target namespaces. For example, restore `prod` → `stage-prod` |
    | **Include Cluster Resources** | Optional | Defines whether cluster-scoped resources should be restored. You can choose: <ul><li>**Auto (Recommended):** Automatically determines which cluster resources to include, based on context</li><li>**Include all:** Restores all cluster-scoped resources from the backup</li><li>**Exclude all:** Skips all cluster-scoped resources, restoring only namespace-scoped resources</li></ul> |
    | **Restore Volumes** | Optional | Enables restoring persistent volumes from snapshots taken during the backup. Toggle this on if you need your application data to be restored along with configurations|
    | **Preserve Node Ports** | Optional | Retains existing node ports for restored services to avoid port conflicts or reassignments during restore |
    | **Existing Resource Policy** | Optional | Specifies how to handle already existing resources: <ul><li> **Skip Resources** – Ignore existing ones</li> <li> **Update Resources** – Replace or modify existing resources </li></ul> |
    | **Modify Resources During Restore** | Optional | Allows you to modify resources dynamically during restore using: <ul><li>**ConfigMap:** Reference a ConfigMap containing JSON patch rules to make specific changes (for example, updating storage classes or image tags)</li><li>**JSON Patch:** Apply JSON patches inline for fine-grained control</li></ul> |

    ::: info Modify resources during restore

    A resource modifier ConfigMap lets you customize Kubernetes resources during a restore by applying JSON patch rules before they are recreated on the target cluster. This helps make backups portable and ensures smooth restores across different environments.

    **Example use cases:**
    **Cluster migrations:** Change storageClassNames in PVCs to match storage classes available in the new cluster. 
    **How to use:** Create a ConfigMap with JSON patch rules defining the changes you want. Velero will automatically apply these rules to your resources during the restore, allowing you to tailor them for your target cluster's setup.

    :::

    ### 4. Timeout & Execution Controls

    | **Field** | **Required/Optional** | **Description** |
    |------------|-----------------------|-----------------|
    | **Parallel Files Download** | Optional | Number of restore threads to run in parallel. Set to `0` to match the node CPU count automatically |
    | **Write Sparse Files** | Optional | Enables writing of sparse files during volume restoration to optimize disk space usage |
    | **Item Operation Timeout** | Optional | Duration (in seconds/minutes) to wait for individual restore operations before timing out |

4. Click **Save**. A restore will be initiated.

---

## Viewing Restores

After restoration of a backup is initiated, you can view your restore on the **Restores** Page under **Data Protection Management**. This page shows all your restore jobs, along with their current status, target cluster, and backup source.

| **Column** | **Description** |
|-------------|-----------------|
| **Restore Name** | Displays the unique name of the restore job. Click the name to view detailed information such as restored namespaces, logs, and resource summary. |
| **Status** | Shows the current state of the restore:<ul><li>**Progressing** – The restore process is currently in progress </li><li>**Completed** – Restore has successfully finished, and all resources have been recovered </li><li>**Failed** – The restore could not be completed due to configuration or resource-level errors</li><li> **Partially Completed** – Restore finished, but some resources were skipped or encountered issues during restoration</li></ul> |
| **Target Cluster** | Displays the cluster where the backup was restored |
| **Backup Source** | Shows the name of the backup used for this restore |
| **Schedule** | Indicates the backup schedule from which the backup originated |
| **Created By** | Displays the user or service account that initiated the restore |
| **Date** | Shows the date and time when the restore was created or triggered |

You can use the **Search** bar or apply filters such as **Cluster**, **Status**, and **Created By** to quickly find a specific restore job or narrow down the list based on recent restore activity.

| **Filter** | **Description** |
|-------------|-----------------|
| **Cluster** | Filter restores by the target cluster where they were applied |
| **Status** | Filter restores by their current state (for example, **Progressing**, **Completed**, **Failed**, **Partially Failed**) |
| **Created By** | Filter restores by the user or schedule that initiated them |

These filters make it easier to locate specific restore jobs, track recovery operations across clusters, and verify restore outcomes — ensuring that your environments are safely and accurately recovered.

### Inspecting Restore

When you click on a restore job from the **Restores** tab, a detailed view opens showing its configuration, progress, and results.  
This page helps you verify whether the restore completed successfully and understand what resources were included or skipped.

The left-side of the page displays the following information:

| **Field** | **Description** |
|------------|-----------------|
| **Status** | Shows the current state of the restore (**Completed**, **Progressing**, **Failed**, or **Partially Completed**) |
| **Warnings & Errors** | Indicates the number of warnings or errors encountered during the restore process | 
| **Resources** | Displays the number of successfully restored resources against the total resources processed |
| **Target Cluster** | The cluster where the restore operation was performed |
| **Created By** | The user or service account that initiated the restore |
| **Restored From Backup** | Displays the backup name and timestamp used for this restore. Clicking the backup name navigates to its details view |
| **Duration** | Shows how long the restore took to complete |
| **Included Resources** | Lists all resource types included in the restore operation |
| **Excluded Resources** | Lists resources that were excluded from the restore, such as nodes, events, or cluster-scoped resources |

On the right-side of the page, you can switch between two tabs: **Namespace Mapping** and **Manifest**, to review the details of what was restored.

| **Tab** | **Description** |
|----------|-----------------|
| **Namespace Mapping** | Displays the mapping between source and target namespaces. This helps confirm that workloads were restored to the correct destination (for example, `production-space` → `prod-space`) |
| **Manifest** | Shows the YAML manifest of the restore job, including specifications, restore options, and applied configurations. This helps advanced users validate cluster resources and understand how restore parameters were executed |
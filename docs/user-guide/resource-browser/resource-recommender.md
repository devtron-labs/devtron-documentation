# Resource Recommender 

## Introduction

**Resource Recommender** is a Devtron feature that analyzes historical resource usage (such as, CPU, memory) of Kubernetes workloads in a specific cluster and generates data-backed recommendations for optimal resource allocation. 


These recommendations are generated by a background job that runs daily at a particular time by default, using resource usage metrics collected from Prometheus. Job frequency can be customized by modifying the configuration in the ConfigMap. Refer 

It helps users eliminate manual guesswork, reduce over-provisioning, and prevent performance issues caused by under provisioned workloads.

{% hint style="info" %}
### Prerequisites

* Prometheus endpoint must be configured. Refer to the [Cluster and Environments](./global-configurations/cluster-and-environments.md#configure-prometheus-enable-application-metrics)

{% endhint %}

## Inspect Recommendations

To inspect the resource recommendations, follow the below steps:

1. Navigate to **Resource Browser**.

2. Select the specific cluster for which you want to inspect the resource recommendations.

3. Select the **Resource Recommender** tab to inspect the recommendations.
     1. Each row displays workloads in that cluster, along with recommendations for CPU and memory. 

     2. Recommendations are shown as percentage changes by default. You can toggle **Show absolute values** to see current v/s recommended values in actual units (e.g., 128Mi → 4900Ki).

4. You can inspect the resource recommendations for each workload within the cluster.
     1. If you wish, you can filter the workloads based on there `Kind` and `Namespace`.

     2. You can also search for a specific workload via search bar.

5. For each workload, recommendations can be of the following types:

 ### Types of Recommendation

 | Type  | Visual Indicator  |Description                              |
 |:---   |:---               |:---|
 |`↑`   | Red upward arrow   |Recommended value is higher than current |
 |`↓`   | Green upward arrow |Recommended value is lower than current  |
 |`0% -`| Gray dash (-)      |Current value equals recommended         |
 |`No Recommendation`|`No Recommendation`| No recommendation available |

 ### Supported Resources

 | Type           |Description                              |
 |:---            |:---                                     |
 |`CPU REQUESTS`  |Minimum **CPU** allocated to the workload|
 |`CPU LIMITS`    |Maximum **CPU** allocated to the workload|
 |`MEM REQUESTS`  |Minimum **Memory (RAM)** allocated to the workload|
 |`MEM LIMITS`    |Minimum **Memory (RAM)** allocated to the workload|

6. Hover the cursor over the specific resource of the specific workload to view the recommendation.

## Apply Recommendations

After inspecting the recommendations, you can directly apply them to your workloads. You can apply recommendations in the following ways

### Apply Per Workload

To apply recommended resources to a specific workload, follow the steps below:

1. Select the specific workload and click **Apply Changes** or hover over the specific workload row and click the **Apply** button that appears on hover.

2. A modal window will open, displaying the comparison between the current and recommended resource values for that specific workload.

3. Review the recommended changes carefully.

4. Click **Apply Changes** to update the resource configuration.

### Bulk Apply

If you wish, you can apply recommended resource configurations to multiple or all workloads at once. To do so, follow the below steps:

1. Select the workloads for which you want to apply recommended resource configurations.

2. Click **Apply Changes**; a modal window will open, displaying the comparison between the current and recommended resource values for each workload.

3. Review the recommended changes for each workload carefully.

4. Click **Apply Changes** to update the resource configuration.

## Download 

## Modify Resource Recommender Job Schedule

To modify the schedule of the **Resource Recommender** background job, follow the below steps:

1. In a new tab, go to **Resource Browser** → (Select Cluster) → **Config & Storage** → **ConfigMap**

2. Select the **Orchestrator/Devtron ConfigMap**
     1. If **Devtron** is managing your setup, select `orchestrator-cm` and click **Edit Live Manifest**.
     
     2. If you installed Devtron via Helm, select `devtron-cm` and click **Edit Live Manifest**.

3. Edit the `KRR_SYNC_JOB_CRON_SCHEDULE` key and set the schedule according to your use-case using cron expression.

4. Click **Apply Changes** and manifest will be updated.

5. Restart the 
 

